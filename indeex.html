import React, { useState, useEffect } from "react";

export default function VidaOrganizadaAI() {
  const telas = [
    "Inicio",
    "Assistente",
    "Cardapio",
    "Tarefas",
    "Consultas",
    "Rotina",
    "Remedios",
  ];

  const [tela, setTela] = useState("Inicio");

  /* ===================== CARDÃPIO ===================== */
  const dias = [
    "Segunda",
    "TerÃ§a",
    "Quarta",
    "Quinta",
    "Sexta",
    "SÃ¡bado",
    "Domingo",
  ];

  const [cardapio, setCardapio] = useState({});

  useEffect(() => {
    const salvo = localStorage.getItem("cardapioVidaAI");
    if (salvo) setCardapio(JSON.parse(salvo));
  }, []);

  function salvarCardapio() {
    localStorage.setItem("cardapioVidaAI", JSON.stringify(cardapio));
    alert("CardÃ¡pio salvo âœ…");
  }

  /* ===================== TAREFAS ===================== */
  const [tarefas, setTarefas] = useState("");

  useEffect(() => {
    setTarefas(localStorage.getItem("tarefasVidaAI") || "");
  }, []);

  function salvarTarefas() {
    localStorage.setItem("tarefasVidaAI", tarefas);
  }

  /* ===================== CONSULTAS ===================== */
  const [consultas, setConsultas] = useState([]);
  const [consultaNome, setConsultaNome] = useState("");
  const [consultaData, setConsultaData] = useState("");

  useEffect(() => {
    const salvo = localStorage.getItem("consultasVidaAI");
    if (salvo) setConsultas(JSON.parse(salvo));
  }, []);

  function salvarConsulta() {
    const nova = [...consultas, { nome: consultaNome, data: consultaData }];
    setConsultas(nova);
    localStorage.setItem("consultasVidaAI", JSON.stringify(nova));
    setConsultaNome("");
    setConsultaData("");
  }

  /* ===================== ROTINA ===================== */
  const [rotina, setRotina] = useState("");

  useEffect(() => {
    setRotina(localStorage.getItem("rotinaVidaAI") || "");
  }, []);

  function salvarRotina() {
    localStorage.setItem("rotinaVidaAI", rotina);
    alert("Rotina salva âœ…");
  }

  /* ===================== REMÃ‰DIOS ===================== */
  const [remedios, setRemedios] = useState([]);
  const [remedioNome, setRemedioNome] = useState("");
  const [remedioHora, setRemedioHora] = useState("");

  useEffect(() => {
    const salvo = localStorage.getItem("remediosVidaAI");
    if (salvo) setRemedios(JSON.parse(salvo));
  }, []);

  function salvarRemedio() {
    const nova = [...remedios, { nome: remedioNome, hora: remedioHora }];
    setRemedios(nova);
    localStorage.setItem("remediosVidaAI", JSON.stringify(nova));
    setRemedioNome("");
    setRemedioHora("");
  }

  /* ===================== UI ===================== */
  return (
    <div style={{ fontFamily: "Arial", background: "#f6f7fb", minHeight: "100vh" }}>
      <div style={{ padding: 20, paddingBottom: 90 }}>
        {tela === "Inicio" && (
          <>
            <h2>ğŸŒ¿ Vida Organizada AI</h2>
            <div className="card">Seu copiloto pessoal para casa e famÃ­lia.</div>
          </>
        )}

        {tela === "Assistente" && (
          <>
            <h2>ğŸ¤– Assistente Vivo</h2>
            <div className="card">Assistente inteligente em evoluÃ§Ã£o.</div>
          </>
        )}

        {tela === "Cardapio" && (
          <>
            <h2>ğŸ½ï¸ CardÃ¡pio Inteligente</h2>
            {dias.map((d) => (
              <div key={d} className="card">
                <strong>{d}</strong>
                <input
                  value={cardapio[d] || ""}
                  placeholder="RefeiÃ§Ã£o"
                  onChange={(e) =>
                    setCardapio({ ...cardapio, [d]: e.target.value })
                  }
                />
              </div>
            ))}
            <button onClick={salvarCardapio}>ğŸ’¾ Salvar</button>
          </>
        )}

        {tela === "Tarefas" && (
          <>
            <h2>ğŸ§¹ Tarefas de Casa</h2>
            <textarea
              value={tarefas}
              onChange={(e) => setTarefas(e.target.value)}
            />
            <button onClick={salvarTarefas}>Salvar tarefas</button>
          </>
        )}

        {tela === "Consultas" && (
          <>
            <h2>ğŸ©º Consultas</h2>
            <input
              value={consultaNome}
              placeholder="Consulta / MÃ©dico"
              onChange={(e) => setConsultaNome(e.target.value)}
            />
            <input
              type="date"
              value={consultaData}
              onChange={(e) => setConsultaData(e.target.value)}
            />
            <button onClick={salvarConsulta}>Adicionar</button>
            {consultas.map((c, i) => (
              <div key={i} className="card">
                {c.nome} â€” {c.data}
              </div>
            ))}
          </>
        )}

        {tela === "Rotina" && (
          <>
            <h2>ğŸ“… Rotina DiÃ¡ria</h2>
            <textarea
              value={rotina}
              onChange={(e) => setRotina(e.target.value)}
            />
            <button onClick={salvarRotina}>Salvar rotina</button>
          </>
        )}

        {tela === "Remedios" && (
          <>
            <h2>ğŸ’Š Lembretes de RemÃ©dio</h2>
            <input
              value={remedioNome}
              placeholder="Nome do remÃ©dio"
              onChange={(e) => setRemedioNome(e.target.value)}
            />
            <input
              type="time"
              value={remedioHora}
              onChange={(e) => setRemedioHora(e.target.value)}
            />
            <button onClick={salvarRemedio}>Adicionar</button>
            {remedios.map((r, i) => (
              <div key={i} className="card">
                ğŸ’Š {r.nome} â€” {r.hora}
              </div>
            ))}
          </>
        )}
      </div>

      {/* MENU */}
      <nav
        style={{
          position: "fixed",
          bottom: 0,
          width: "100%",
          background: "#fff",
          display: "flex",
          justifyContent: "space-around",
          padding: 10,
          borderTop: "1px solid #ddd",
        }}
      >
        {telas.map((t) => (
          <button key={t} onClick={() => setTela(t)}>
            {t === "Inicio" && "ğŸ "}
            {t === "Assistente" && "ğŸ¤–"}
            {t === "Cardapio" && "ğŸ½ï¸"}
            {t === "Tarefas" && "ğŸ§¹"}
            {t === "Consultas" && "ğŸ©º"}
            {t === "Rotina" && "ğŸ“…"}
            {t === "Remedios" && "ğŸ’Š"}
          </button>
        ))}
      </nav>
    </div>
  );
}
