<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Vida Organizada AI</title>

<link rel="manifest" href="manifest.json">

<style>
body{
font-family:Arial;
background:#f3f6fb;
margin:0;
}

header{
background:#6c8cff;
color:white;
padding:15px;
text-align:center;
font-size:20px;
}

.container{
padding:15px;
}

.card{
background:white;
padding:15px;
margin-bottom:15px;
border-radius:12px;
box-shadow:0 4px 12px rgba(0,0,0,.1);
}

button{
background:#6c8cff;
color:white;
border:none;
padding:10px;
border-radius:8px;
width:100%;
margin-top:8px;
}

input{
width:100%;
padding:8px;
margin-top:5px;
}
</style>
</head>

<body>

<header>ðŸŒ¸ Vida Organizada AI</header>

<div class="container">
<div class="card" id="painelAI">
<h3>ðŸ¤– Copiloto AutÃ´nomo</h3>
<p id="planoDia">Analisando seu dia...</p>
</div>
<div class="card">
<h3>ðŸ’° Controle Financeiro</h3>
<input id="valor" placeholder="Valor gasto">
<button onclick="addGasto()">Adicionar gasto</button>
<p>Total do mÃªs: R$ <span id="total">0</span></p>
</div>

<div class="card">
<h3>ðŸŽ¯ Meta Financeira</h3>
<input id="meta" placeholder="Meta mensal">
<button onclick="salvarMeta()">Salvar meta</button>
<p id="metaTexto"></p>
</div>

<div class="card">
<h3>ðŸ¥— CardÃ¡pio da Semana</h3>
<textarea id="cardapio" placeholder="Digite seu cardÃ¡pio semanal"></textarea>
<button onclick="salvarCardapio()">Salvar cardÃ¡pio</button>
</div>

<div class="card">
<h3>ðŸ‘¶ Perfis dos Filhos</h3>
<input id="filho" placeholder="Nome do filho">
<button onclick="addFilho()">Adicionar</button>
<ul id="listaFilhos"></ul>
</div>

<div class="card">
<h3>ðŸŒ™ Modo Dia CaÃ³tico</h3>
<button onclick="modoCaotico()">Ativar rotina simplificada</button>
<p id="caos"></p>
</div>

</div>

<script>

let gastos = JSON.parse(localStorage.getItem("gastos")) || [];
let filhos = JSON.parse(localStorage.getItem("filhos")) || [];

function atualizarTotal(){
let total = gastos.reduce((a,b)=>a+b,0);
document.getElementById("total").innerText = total;
}

function addGasto(){
let v = Number(document.getElementById("valor").value);
gastos.push(v);
localStorage.setItem("gastos",JSON.stringify(gastos));
atualizarTotal();
}

function salvarMeta(){
let meta = document.getElementById("meta").value;
localStorage.setItem("meta",meta);
document.getElementById("metaTexto").innerText =
"Meta mensal: R$ "+meta;
}

function salvarCardapio(){
localStorage.setItem(
"cardapio",
document.getElementById("cardapio").value
);
alert("CardÃ¡pio salvo!");
}

function addFilho(){
let nome = document.getElementById("filho").value;
filhos.push(nome);
localStorage.setItem("filhos",JSON.stringify(filhos));
mostrarFilhos();
}

function mostrarFilhos(){
let lista=document.getElementById("listaFilhos");
lista.innerHTML="";
filhos.forEach(f=>{
lista.innerHTML+=`<li>${f}</li>`;
});
}

function modoCaotico(){
document.getElementById("caos").innerText =
"Hoje sÃ³ o essencial: alimentar crianÃ§as, Ã¡gua, descanso e uma tarefa pequena â¤ï¸";
}

atualizarTotal();
mostrarFilhos();

if("serviceWorker" in navigator){
navigator.serviceWorker.register("sw.js");
}
// ===== ASSISTENTE INTELIGENTE =====

function mensagemAssistente(){

let hora = new Date().getHours();
let gastos = JSON.parse(localStorage.getItem("gastos")) || [];

let total = gastos.reduce((a,b)=>a+b,0);

let mensagem = "";

if(hora < 12){
mensagem = "ðŸŒž Bom dia! Comece pelo essencial, nÃ£o pela perfeiÃ§Ã£o.";
}
else if(hora < 18){
mensagem = "ðŸŒ¤ï¸ Tarde produtiva leve. FaÃ§a apenas 1 tarefa importante.";
}
else{
mensagem = "ðŸŒ™ Hora de desacelerar. VocÃª jÃ¡ fez o suficiente hoje.";
}

// previsÃ£o financeira simples
if(total > 1000){
mensagem += " ðŸ’° AtenÃ§Ã£o: gastos altos este mÃªs. Melhor economizar hoje.";
}

// detectar sobrecarga
let hoje = new Date().getDay();
if(hoje == 3 || hoje == 4){
mensagem += " ðŸ¤ Meio da semana detectado â€” reduza expectativas.";
}

mostrarAssistente(mensagem);
}

function mostrarAssistente(msg){

let box = document.createElement("div");
box.style.position="fixed";
box.style.bottom="20px";
box.style.left="20px";
box.style.right="20px";
box.style.background="#6c8cff";
box.style.color="white";
box.style.padding="15px";
box.style.borderRadius="12px";
box.style.boxShadow="0 5px 15px rgba(0,0,0,.2)";
box.innerText = msg;

document.body.appendChild(box);

setTimeout(()=>{box.remove()},8000);
}

// executa sozinho
setTimeout(mensagemAssistente,3000);
// ===== COPILOTO AUTÃ”NOMO =====

function analisarDia(){

let hoje = new Date();
let dia = hoje.getDay();

let gastos = JSON.parse(localStorage.getItem("gastos")) || [];
let total = gastos.reduce((a,b)=>a+b,0);

let mensagem="";

// energia da semana
if(dia == 1){
mensagem="ðŸš€ Segunda leve: escolha apenas 1 prioridade.";
}
else if(dia == 3 || dia == 4){
mensagem="ðŸ¤ Meio da semana detectado. Reduza cobranÃ§as.";
}
else if(dia == 6){
mensagem="âœ¨ SÃ¡bado ideal para organizar refeiÃ§Ãµes.";
}
else{
mensagem="ðŸŒ™ Dia de manutenÃ§Ã£o da casa e descanso.";
}

// previsÃ£o financeira
if(total > 800){
mensagem += " ðŸ’° Copiloto: melhor evitar compras hoje.";
}

// rotina automÃ¡tica
mensagem += `
\n\nPlano sugerido:
ðŸŒž ManhÃ£ â†’ essencial da casa
ðŸŒ¤ï¸ Tarde â†’ tarefa rÃ¡pida
ðŸŒ™ Noite â†’ desacelerar
`;

document.getElementById("planoDia").innerText = mensagem;

gerarListaCompras();
}

// ===== LISTA AUTOMÃTICA =====

function gerarListaCompras(){

let cardapio = localStorage.getItem("cardapio") || "";

let lista=[];

if(cardapio.includes("frango")) lista.push("ðŸ— Frango");
if(cardapio.includes("arroz")) lista.push("ðŸš Arroz");
if(cardapio.includes("ovo")) lista.push("ðŸ¥š Ovos");
if(cardapio.includes("salada")) lista.push("ðŸ¥¬ Verduras");

if(lista.length>0){

let div=document.createElement("div");
div.className="card";
div.innerHTML="<h3>ðŸ›’ Lista automÃ¡tica</h3>"+lista.join("<br>");
document.querySelector(".container").appendChild(div);

}
}

// executa sozinho ao abrir
window.onload = analisarDia;
</script>

</body>
</html>