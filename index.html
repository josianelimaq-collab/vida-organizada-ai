<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Vida Organizada AI</title>

<style>

body{
font-family: system-ui, -apple-system;
background: linear-gradient(180deg,#6c8cff,#f3f6fb);
margin:0;
color:#333;
}

header{
position:sticky;
top:0;
background:#6c8cff;
color:white;
text-align:center;
padding:18px;
font-size:20px;
font-weight:bold;
box-shadow:0 2px 8px rgba(0,0,0,0.15);
z-index:10;
}

.tela{
display:none;
padding:18px;
padding-bottom:90px;
animation:fade .25s ease;
}

.tela.ativa{
display:block;
}

@keyframes fade{
from{opacity:0; transform:translateY(8px);}
to{opacity:1; transform:translateY(0);}
}

.card{
background:white;
padding:18px;
margin-bottom:16px;
border-radius:20px;
box-shadow:0 6px 18px rgba(0,0,0,0.08);
}

input{
width:100%;
padding:12px;
margin-top:6px;
margin-bottom:12px;
border-radius:10px;
border:1px solid #ddd;
font-size:15px;
}

button{
cursor:pointer;
}

button.acao{
width:100%;
padding:14px;
border:none;
border-radius:12px;
background:#6c8cff;
color:white;
font-size:16px;
font-weight:600;
transition:.2s;
}

button.acao:active{
transform:scale(.97);
}

.menuApp{
position:fixed;
bottom:0;
left:0;
width:100%;
background:white;
border-top:1px solid #eee;
display:flex;
justify-content:space-around;
padding:10px 0;
box-shadow:0 -4px 12px rgba(0,0,0,0.08);
}

.menuApp button{
background:none;
border:none;
font-size:22px;
opacity:.5;
transition:.2s;
}

.menuApp button:hover{
opacity:1;
transform:scale(1.1);
}

.lista-item{
display:flex;
justify-content:space-between;
margin-bottom:10px;
background:#f7f8ff;
padding:10px;
border-radius:10px;
}

</style>
</head>

<body>

<header>ğŸŒ¸ Vida Organizada AI</header>

<div class="card" id="assistenteAI" style="margin:15px;">
<h3>ğŸ¤– Assistente Vida AI</h3>
<div id="mensagemAI">Analisando sua rotina...</div>
</div>
<!-- TAREFAS -->
<div id="tarefas" class="tela ativa">
<div class="card">
<h3>Tarefas de Casa</h3>
< id="novaTarefa" placeholder="Adicionar tarefa...">
<button onclick="addTarefa()">Adicionar</button>
<div id="listaTarefas" class="lista"></div>
</div>
</div>

<!-- CONSULTAS -->
<div id="consultas" class="tela">
<div class="card">
<h3>Consultas</h3>
< id="nomeConsulta" placeholder="Nome">
<input type="date" id="dataConsulta">
<button onclick="addConsulta()">Salvar</button>
<div id="listaConsultas" class="lista"></div>
</div>
</div>

<!-- ROTINA -->
<div id="rotina" class="tela">
<div class="card">
<h3>Rotina DiÃ¡ria</h3>
<input id="rotinaTexto" placeholder="Nova rotina">
<button onclick="addRotina()">Adicionar</button>
<div id="listaRotina" class="lista"></div>
</div>
</div>

<!-- REMÃ‰DIOS -->
<div id="remedios" class="tela">
<div class="card">
<h3>Lembrete de RemÃ©dios</h3>
<input id="nomeRemedio" placeholder="RemÃ©dio">
<input type="time" id="horaRemedio">
<button onclick="addRemedio()">Adicionar</button>
<div id="listaRemedios" class="lista"></div>
</div>
</div>

<!-- CARDÃPIO -->
<div id="cardapio" class="tela">
<div class="card">
<h3>ğŸ½ CardÃ¡pio da Semana</h3>

<div class="card">

<h3>ğŸ¥— NutriÃ§Ã£o Adaptativa IA</h3>

<div class="card">

<h3>ğŸ§  Corpo Inteligente IA</h3>

<label>Peso (kg)</label>
<input id="pesoUsuario" type="number" placeholder="Ex: 65">

<label>Altura (cm)</label>
<input id="alturaUsuario" type="number" placeholder="Ex: 165">

<label>NÃ­vel de atividade</label>
<select id="atividadeUsuario">
<option value="1.2">SedentÃ¡ria</option>
<option value="1.37">Leve (rotina casa)</option>
<option value="1.55">Moderada</option>
<option value="1.75">Alta</option>
</select>

<button class="acao" onclick="calcularCorpoIA()">
Calcular metabolismo
</button>

<div id="resultadoCorpoIA" style="margin-top:10px;"></div>

</div>
  
<div id="analiseIA">
Analisando seus hÃ¡bitos alimentares...
</div>

<button class="acao" onclick="gerarPlanoAutomatico()">

<label>Meta diÃ¡ria de calorias</label>
<input id="metaCalorias" type="number" placeholder="Ex: 2000">

<div>
Consumido hoje:
<b id="caloriasHoje">0 kcal</b>
</div>

<button class="acao" onclick="sugerirRefeicoesIA()">  
âœ¨ Criar cardÃ¡pio inteligente do dia
</button>

<div id="planoIA" style="margin-top:10px;"></div>

</div>  
  
<div>
Status:
<b id="statusCalorias">â€”</b>
</div>

<hr>

<h4>ğŸ’§ Ãgua</h4>

<label>Meta diÃ¡ria (ml)</label>
<input id="metaAgua" type="number" onchange="salvarMetaAgua()">

<div>
Bebido hoje:
<b id="aguaHoje">0 ml</b>
</div>

<button class="acao" onclick="beberAgua(200)">
+200 ml
</button>

<button class="acao" onclick="beberAgua(500)">
+500 ml
</button>

<div id="statusAgua"></div>

<button class="acao" onclick="sugestaoCaloricaIA()">
ğŸ¤– Sugerir pratos para bater meta
</button>

<div id="sugestaoIA" style="margin-top:10px;"></div>

</div>
  
<div class="card">

<h3>ğŸ”¥ NutriÃ§Ã£o Inteligente</h3>

<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">

<div>ğŸ”¥ Calorias da semana<br>
<b id="caloriasSemana">0 kcal</b></div>

<div>ğŸ¤– Status IA<br>
<b id="statusDieta">Analisando...</b></div>

</div>

<div id="cardapioLista"></div>

<button class="acao" onclick="salvarCardapio()">Salvar CardÃ¡pio</button>

<button class="acao" onclick="sugerirRefeicoesIA()">
âœ¨ Sugerir refeiÃ§Ãµes inteligentes
</button>

<div id="sugestoesRefeicoes" style="margin-top:15px;"></div>
  
</div>
</div>

<!-- FINANCEIRO -->
<div id="financeiro" class="tela">

<div class="card">
<h3>ğŸ’° Controle Financeiro</h3>

<div class="card">

<h3>ğŸ’µ Entradas de Dinheiro</h3>

<input id="descricaoEntrada" placeholder="Ex: SalÃ¡rio, Pix, Venda">
<input id="valorEntrada" type="number" placeholder="Valor recebido">

<button class="acao" onclick="addEntrada()">
Adicionar Entrada
</button>

<div id="listaEntradas"></div>

</div>
  
<div class="card">
  
<h3>ğŸ“Š Painel Financeiro PRO</h3>
  
<div style="
margin-top:15px;
padding:12px;
background:#f7f8ff;
border-radius:14px;
">

<div><b>ğŸ’° Saldo Atual:</b> <span id="saldoAtual">R$ 0</span></div>
<div><b>ğŸ“‰ Gastos Pagos:</b> <span id="gastosPagos">R$ 0</span></div>
<div><b>â³ Pendentes:</b> <span id="gastosPendentes">R$ 0</span></div>

</div>
  
<div style="
display:grid;
grid-template-columns:1fr 1fr;
gap:10px;
margin-top:10px;
">

<div class="item">ğŸ’¸ Total do mÃªs:<br><b id="totalMes">R$ 0</b></div>

<div class="item">ğŸ  Contas fixas:<br><b id="totalFixas">R$ 0</b></div>

<div class="item">ğŸ”„ VariÃ¡veis:<br><b id="totalVariaveis">R$ 0</b></div>

<div class="item">ğŸ“ˆ PrevisÃ£o:<br><b id="previsaoSaldo">R$ 0</b></div>

</div>

<div id="alertasFinanceiros" style="margin-top:10px;"></div>
</div>

<input id="descricaoConta" placeholder="DescriÃ§Ã£o (ex: Luz, Mercado)">
<input type="date" id="dataVencimento">
<input id="valorConta" placeholder="Valor (R$)">

<select id="tipoConta">
<option value="fixa">Conta Fixa</option>
<option value="variavel">Conta VariÃ¡vel</option>
<option value="cartao">Parcelamento CartÃ£o</option>
<option value="meta">Meta / PoupanÃ§a</option>
</select>
  
<select id="statusConta">
<option value="nao">âŒ NÃ£o paga</option>
<option value="pago">âœ… Paga</option>
</select>
  
<button class="acao" onclick="addConta()">Adicionar</button>

<select id="recorrente">
<option value="nao">Pagamento Ãºnico</option>
<option value="sim">ğŸ” Recorrente mensal</option>
</select>

<input id="parcelas" type="number" placeholder="Qtd parcelas (ex: 12)">

<div id="listaFinanceiro"></div>

<input id="nomeCartao" placeholder="Nome do cartÃ£o">
<input id="limiteTotal" type="number" placeholder="Limite total">
<input id="limiteUsado" type="number" placeholder="Total utilizado">

<button onclick="addCartao()">Salvar cartÃ£o</button>

<div id="listaCartoes"></div>

</div>
</div>

<!-- ASSISTENTE -->
<div id="assistente" class="tela">

<div class="card">
<h3>ğŸ¤– Assistente Vida AI</h3>

<p id="mensagemAssistente">
OlÃ¡ ğŸŒ¸ Estou aqui para te ajudar a organizar seu dia.
</p>

<input id="pergunta" placeholder="Digite algo..." />

<button class="acao" onclick="responderAssistente()">
Enviar
</button>

</div>

</div>
  
<!-- COMPRAS -->
<div id="compras" class="tela">
<div class="card">
<h3>ğŸ›’ Lista de Compras</h3>
<div id="listaCompras"></div>
<button class="acao" onclick="gerarCompras()">Atualizar Lista</button>
</div>
</div>
  
<!-- MENU -->
<div class="menuApp">
<button onclick="trocar('tarefas')">ğŸ </button>
<button onclick="trocar('consultas')">ğŸ“…</button>
<button onclick="trocar('rotina')">ğŸ§ </button>
<button onclick="trocar('assistente')">ğŸ¤–</button>
<button onclick="trocar('cardapio')">ğŸ½</button>
<button onclick="trocar('compras')">ğŸ›’</button>
<button onclick="trocar('financeiro')">ğŸ’°</button>
<button onclick="trocar('remedios')">ğŸ’Š</button>
</div>

<script>

/* -------- TROCAR TELA -------- */
function trocar(id){
document.querySelectorAll('.tela').forEach(t=>t.classList.remove('ativa'));
document.getElementById(id).classList.add('ativa');
}

/* -------- STORAGE -------- */
function salvar(chave,valor){
localStorage.setItem(chave,JSON.stringify(valor));
}

function carregar(chave){
return JSON.parse(localStorage.getItem(chave))||[];
}

/* -------- TAREFAS -------- */
let tarefas=carregar("tarefas");

function renderTarefas(){
const lista=document.getElementById("listaTarefas");
lista.innerHTML="";
tarefas.forEach((t,i)=>{
lista.innerHTML+=`<div class="item">${t}
<button onclick="removerTarefa(${i})">âŒ</button></div>`;
});
}

function addTarefa(){
const input=document.getElementById("novaTarefa");
if(!input.value.trim())return;
tarefas.push(input.value);
salvar("tarefas",tarefas);
input.value="";
renderTarefas();
}

function removerTarefa(i){
tarefas.splice(i,1);
salvar("tarefas",tarefas);
renderTarefas();
}

/* -------- CONSULTAS -------- */
let consultas=carregar("consultas");

function renderConsultas(){
const lista=document.getElementById("listaConsultas");
lista.innerHTML="";
consultas.forEach(c=>{
lista.innerHTML+=`<div>${c.nome} - ${c.data}</div>`;
});
}

function addConsulta(){
const nome=document.getElementById("nomeConsulta").value;
const data=document.getElementById("dataConsulta").value;
if(!nome||!data)return;
consultas.push({nome,data});
salvar("consultas",consultas);
renderConsultas();
}

/* -------- ROTINA -------- */
let rotinas=carregar("rotinas");

function renderRotina(){
const lista=document.getElementById("listaRotina");
lista.innerHTML="";
rotinas.forEach(r=>{
lista.innerHTML+=`<div>${r}</div>`;
});
}

function addRotina(){
const txt=document.getElementById("rotinaTexto");
if(!txt.value.trim())return;
rotinas.push(txt.value);
salvar("rotinas",rotinas);
txt.value="";
renderRotina();
}

/* -------- REMÃ‰DIOS -------- */
let remedios=carregar("remedios");

function renderRemedios(){
const lista=document.getElementById("listaRemedios");
lista.innerHTML="";
remedios.forEach(r=>{
lista.innerHTML+=`<div>${r.nome} Ã s ${r.hora}</div>`;
});
}

function addRemedio(){
const nome=document.getElementById("nomeRemedio").value;
const hora=document.getElementById("horaRemedio").value;
if(!nome||!hora)return;
remedios.push({nome,hora});
salvar("remedios",remedios);
renderRemedios();
}

/* -------- INIT -------- */
renderTarefas();
renderConsultas();
renderRotina();
renderRemedios();

/* -------- CARDÃPIO -------- */

const dias = [
"Segunda","TerÃ§a","Quarta","Quinta","Sexta","SÃ¡bado","Domingo"
];

let cardapio = carregar("cardapio");

function renderCardapio(){
const area=document.getElementById("cardapioLista");
area.innerHTML="";

dias.forEach((dia,i)=>{
const dados = cardapio[i] || {cafe:"",almoco:"",jantar:""};

area.innerHTML+=`
<div class="card">
<strong>${dia}</strong>

<input placeholder="CafÃ© da manhÃ£"
value="${dados.cafe}"
oninput="updateCardapio(${i},'cafe',this.value)">

<input placeholder="AlmoÃ§o"
value="${dados.almoco}"
oninput="updateCardapio(${i},'almoco',this.value)">

<input placeholder="Jantar"
value="${dados.jantar}"
oninput="updateCardapio(${i},'jantar',this.value)">

<input placeholder="Lanches"
value="${dados.lanche || ""}"
oninput="updateCardapio(${i},'lanche',this.value)">
</div>
`;
});
}

function updateCardapio(i,tipo,valor){
if(!cardapio[i]) cardapio[i]={};
cardapio[i][tipo]=valor;
}

function salvarCardapio(){
salvar("cardapio",cardapio);
alert("CardÃ¡pio salvo âœ…");
}

renderCardapio();

/* -------- LISTA DE COMPRAS -------- */

function gerarCompras(){

const lista = document.getElementById("listaCompras");
lista.innerHTML = "";

let itens = [];

cardapio.forEach(dia=>{
if(!dia) return;

Object.values(dia).forEach(refeicao=>{
if(refeicao){
refeicao.split(",").forEach(item=>{
itens.push(item.trim());
});
}
});
});

const unicos = [...new Set(itens)];

unicos.forEach(item=>{
lista.innerHTML += `
<div class="lista-item">
ğŸ›’ ${item}
</div>
`;
});

}

/* -------- ASSISTENTE INTELIGENTE -------- */

function gerarMensagemAI(){

let msg="ğŸŒ¸ Tudo sob controle hoje.";

if(tarefas.length > 5){
msg="âš¡ Muitas tarefas hoje. Priorize sÃ³ o essencial.";
}

if(cardapio.length >=5){
msg="ğŸ½ Semana bem planejada! Talvez preparar refeiÃ§Ãµes adiantadas ajude.";
}

if(consultas.length > 0){
msg="ğŸ“… VocÃª tem compromissos agendados. Confira as consultas.";
}

if(remedios.length > 0){
msg="ğŸ’Š NÃ£o esqueÃ§a seus horÃ¡rios de remÃ©dio hoje.";
}

document.getElementById("mensagemAI").innerText = msg;
}

gerarMensagemAI();
/* -------- COPILOTO INTELIGENTE -------- */

function copilotoAI(){

const hora = new Date().getHours();
let mensagem = "";

/* SAUDAÃ‡ÃƒO POR HORÃRIO */
if(hora < 12){
mensagem = "ğŸŒ… Bom dia! Comece por algo simples.";
}
else if(hora < 18){
mensagem = "â˜€ï¸ Boa tarde! Continue no seu ritmo.";
}
else{
mensagem = "ğŸŒ™ Boa noite! Hora de desacelerar.";
}

/* DETECTAR SOBRECARGA */
if(tarefas.length >= 6){
mensagem = "âš¡ Muitas tarefas hoje. Escolha sÃ³ 3 prioridades.";
}

/* DETECTAR SEMANA CHEIA */
if(cardapio.length >= 6){
mensagem = "ğŸ½ Semana planejada! Preparar refeiÃ§Ãµes antes pode ajudar.";
}

/* SUGERIR COMPRAS */
let totalItens = 0;
cardapio.forEach(d=>{
if(!d) return;
Object.values(d).forEach(r=>{
if(r) totalItens++;
});
});

if(totalItens >= 10){
mensagem = "ğŸ›’ Seu cardÃ¡pio estÃ¡ cheio. Talvez seja dia de compras.";
}

/* CONSULTAS */
if(consultas.length > 0){
mensagem = "ğŸ“… VocÃª tem compromissos agendados. Confira as consultas.";
}

/* REMÃ‰DIOS */
if(remedios.length > 0){
mensagem = "ğŸ’Š Lembrete: mantenha seus horÃ¡rios de remÃ©dio.";
}

document.getElementById("mensagemAI").innerText = mensagem;
}

/* ATUALIZA AUTOMÃTICO */
copilotoAI();
setInterval(copilotoAI, 60000);

/* -------- ASSISTENTE -------- */

function responderAssistente(){
  const pergunta = document
    .getElementById("pergunta")
    .value.toLowerCase();

  const resposta =
    document.getElementById("mensagemAssistente");

  if(pergunta.includes("cansada")){
    resposta.innerText =
      "ğŸŒ™ Que tal diminuir o ritmo hoje e focar sÃ³ no essencial?";
  }
  else if(pergunta.includes("cardapio")){
    resposta.innerText =
      "ğŸ½ï¸ Posso te ajudar a montar o cardÃ¡pio da semana!";
  }
  else if(pergunta.includes("tarefas")){
    resposta.innerText =
      "âœ… Vamos escolher apenas 3 tarefas principais hoje.";
  }
  else{
    resposta.innerText =
      "ğŸ¤– Estou aprendendo! Fale sobre rotina, tarefas ou cardÃ¡pio.";
  }
}
/* -------- ASSISTENTE -------- */

function abrirAssistente(){
mostrarTela("assistente");
}

function abrirTela(id){
document.querySelectorAll('.tela')
.forEach(t=>t.classList.remove('ativa'));

document.getElementById(id)
.classList.add('ativa');
}

/* ===== FINANCEIRO INTELIGENTE ===== */

let contas = JSON.parse(localStorage.getItem("contas")) || [];

function salvarContas(){
localStorage.setItem("contas", JSON.stringify(contas));
renderFinanceiro();
}

function addConta(){

const descricao = document.getElementById("descricaoConta").value.trim();
const valor = Number(document.getElementById("valorConta").value);
const vencimento = document.getElementById("dataVencimento").value;
const tipo = document.getElementById("tipoConta").value;
const status = document.getElementById("statusConta").value;
  
if(!descricao || !valor || !vencimento){
alert("Preencha todos os campos âœ…");
return;
}

contas.push({
descricao,
valor,
vencimento,
tipo,
status
});

salvarContas();

/* limpar campos */
document.getElementById("descricaoConta").value="";
document.getElementById("valorConta").value="";
document.getElementById("dataVencimento").value="";
document.getElementById("statusConta").value = "nao";
}
  
function removerConta(i){
contas.splice(i,1);
salvarContas();
}

/* RENDER LISTA */
function renderFinanceiro(){

const lista = document.getElementById("listaFinanceiro");
if(!lista) return;

lista.innerHTML="";

contas.forEach((c,i)=>{

const status = c.paga ? "âœ… Paga" : "â³ Pendente";
const cor = c.paga ? "#e8ffe8" : "#fff4e8";

lista.innerHTML += `
<div class="lista-item" style="background:${cor}">

<div>
<b>${c.descricao}</b><br>
R$ ${c.valor} â€¢ ${c.tipo}<br>
ğŸ“… ${c.vencimento}<br>
<b>${status}</b>
</div>

<div>
<button onclick="togglePago(${i})">
${c.paga ? "â†©ï¸ Desfazer" : "âœ”ï¸ Pagar"}
</button>

<button onclick="removerConta(${i})">âŒ</button>
</div>

</div>`;
});

}

/* RESUMO NUBANK */
function calcularResumoFinanceiro(){

let totalMes=0;
let fixas=0;
let variaveis=0;

contas.forEach(c=>{

const valor = Number(c.valor)||0;
totalMes+=valor;

if(c.tipo==="fixa") fixas+=valor;
else variaveis+=valor;

});

document.getElementById("totalMes").innerText =
"R$ "+totalMes.toFixed(2);

document.getElementById("totalFixas").innerText =
"R$ "+fixas.toFixed(2);

document.getElementById("totalVariaveis").innerText =
"R$ "+variaveis.toFixed(2);

document.getElementById("previsaoSaldo").innerText =
"R$ "+(-totalMes).toFixed(2);
}

/* INIT */
renderFinanceiro();
calcularResumoFinanceiro();

/* ===== FINANCEIRO ===== */

let cartoes = JSON.parse(localStorage.getItem("cartoes") || "[]");

function salvarCartoes(){
localStorage.setItem("cartoes", JSON.stringify(cartoes));
}

function addCartao(){

const nome = document.getElementById("nomeCartao").value;
const total = Number(document.getElementById("limiteTotal").value);
const usado = Number(document.getElementById("limiteUsado").value);

if(!nome || !total) return;

cartoes.push({nome,total,usado});

salvarCartoes();
renderCartoes();

document.getElementById("nomeCartao").value="";
document.getElementById("limiteTotal").value="";
document.getElementById("limiteUsado").value="";
}

function renderCartoes(){

const lista = document.getElementById("listaCartoes");
if(!lista) return;

lista.innerHTML="";

cartoes.forEach(c=>{

const disponivel = c.total - c.usado;
const porcentagem = (c.usado/c.total)*100;

let cor = "#6c8cff";
let alerta = "";

if(porcentagem >= 80){
cor = "#ff4d4d";
alerta = "âš ï¸ AtenÃ§Ã£o: limite quase cheio";
}
else if(porcentagem >= 50){
cor = "#ffa500";
alerta = "âš¡ Metade do limite utilizada";
}

lista.innerHTML += `
<div style="margin-top:14px;padding:12px;background:#f7f8ff;border-radius:12px">

<b>${c.nome}</b><br>

Total: R$ ${c.total}<br>
Utilizado: R$ ${c.usado}<br>
DisponÃ­vel: <b>R$ ${disponivel}</b>

<div style="background:#eee;height:10px;border-radius:8px;margin-top:8px;">
<div style="
height:100%;
width:${porcentagem}%;
background:${cor};
border-radius:8px;">
</div>
</div>

<div style="font-size:13px;margin-top:6px;color:#555">
${alerta}
</div>

</div>`;
});
}

document.addEventListener("DOMContentLoaded", renderCartoes);

function togglePago(i){

contas[i].paga = !contas[i].paga;

salvarContas();
calcularResumoFinanceiro();
}

/* ===== SALDO INTELIGENTE NUBANK ===== */

function atualizarSaldoNubank(){

let pagos = 0;
let pendentes = 0;

contas.forEach(c=>{

const valor = Number(c.valor)||0;

if(c.status === "pago"){
pagos += valor;
}else{
pendentes += valor;
}

});

const saldo = -(pagos + pendentes);

document.getElementById("gastosPagos").innerText =
"R$ " + pagos.toFixed(2);

document.getElementById("gastosPendentes").innerText =
"R$ " + pendentes.toFixed(2);

const saldoEl = document.getElementById("saldoAtual");

saldoEl.innerText = "R$ " + saldo.toFixed(2);

/* cores estilo Nubank */
if(saldo > -500){
saldoEl.style.color = "#16a34a";
}
else if(saldo > -1500){
saldoEl.style.color = "#f59e0b";
}
else{
saldoEl.style.color = "#ef4444";
}

}

/* atualizar sempre que algo mudar */
const oldSalvar = salvarContas;

salvarContas = function(){
localStorage.setItem("contas", JSON.stringify(contas));
renderFinanceiro();
calcularResumoFinanceiro();
atualizarSaldoNubank();
}

/* iniciar */
atualizarSaldoNubank();  

/* ================================
   BANCO DIGITAL COMPLETO
================================ */

/* ===== ENTRADAS ===== */

let entradas = JSON.parse(localStorage.getItem("entradas")) || [];

function salvarEntradas(){
localStorage.setItem("entradas", JSON.stringify(entradas));
renderEntradas();
atualizarSaldoGeral();
}

function addEntrada(){

const descricao =
document.getElementById("descricaoEntrada").value;

const valor =
Number(document.getElementById("valorEntrada").value);

if(!descricao || !valor) return;

entradas.push({descricao,valor});

document.getElementById("descricaoEntrada").value="";
document.getElementById("valorEntrada").value="";

salvarEntradas();
}

function renderEntradas(){

const lista=document.getElementById("listaEntradas");
if(!lista) return;

lista.innerHTML="";

entradas.forEach((e,i)=>{

lista.innerHTML+=`
<div class="lista-item">
ğŸ’µ ${e.descricao} â€” R$ ${e.valor.toFixed(2)}
<button onclick="removerEntrada(${i})">âŒ</button>
</div>`;
});
}

function removerEntrada(i){
entradas.splice(i,1);
salvarEntradas();
}

/* ===== PARCELAMENTO + RECORRÃŠNCIA ===== */

const oldAddConta = addConta;

addConta = function(){

const descricao =
document.getElementById("descricaoConta").value.trim();

const valor =
Number(document.getElementById("valorConta").value);

const vencimento =
document.getElementById("dataVencimento").value;

const tipo =
document.getElementById("tipoConta").value;

const status =
document.getElementById("statusConta").value;

const recorrente =
document.getElementById("recorrente").value;

const parcelas =
Number(document.getElementById("parcelas").value) || 1;

if(!descricao || !valor || !vencimento){
alert("Preencha os campos");
return;
}

/* criar parcelas automaticamente */
for(let i=1;i<=parcelas;i++){

contas.push({
descricao:
parcelas>1
? `${descricao} (${i}/${parcelas})`
: descricao,

valor,
vencimento,
tipo,
status,
paga: status === "pago",
recorrente
});

}

salvarContas();

document.getElementById("descricaoConta").value="";
document.getElementById("valorConta").value="";
document.getElementById("parcelas").value="";
}

/* ===== SALDO BANCÃRIO REAL ===== */

function atualizarSaldoGeral(){

let totalEntradas = 0;
let totalSaidas = 0;

entradas.forEach(e=> totalEntradas+=e.valor);

contas.forEach(c=>{
if(c.status !== "pago"){
totalSaidas+=Number(c.valor)||0;
}
});

const saldo = totalEntradas - totalSaidas;

const saldoEl = document.getElementById("saldoAtual");

if(!saldoEl) return;

saldoEl.innerText =
"R$ " + saldo.toFixed(2);

/* cores banco */
if(saldo >= 0){
saldoEl.style.color="#16a34a";
}
else if(saldo>-1000){
saldoEl.style.color="#f59e0b";
}
else{
saldoEl.style.color="#ef4444";
}

}

/* ===== RECORRÃŠNCIA AUTOMÃTICA ===== */

function verificarRecorrentes(){

const hoje = new Date().getDate();

contas.forEach(c=>{

if(c.recorrente==="sim"){

const diaVenc =
new Date(c.vencimento).getDate();

if(diaVenc===hoje && c.status==="pago"){
c.status="nao";
}

}

});

salvarContas();
}

/* INIT */
renderEntradas();
atualizarSaldoGeral();
setInterval(verificarRecorrentes,60000);

/* ==========================
   CARDÃPIO INTELIGENTE IA
========================== */

/* banco simples de calorias */
const caloriasDB = {
"arroz":130,
"feijao":90,
"frango":165,
"ovo":70,
"banana":90,
"maÃ§a":80,
"pÃ£o":140,
"salada":40,
"carne":250,
"macarrÃ£o":220,
"iogurte":120,
"aveia":110
};

function calcularCalorias(){

let total = 0;

cardapio.forEach(dia=>{

if(!dia) return;

Object.values(dia).forEach(refeicao=>{

if(!refeicao) return;

refeicao.toLowerCase().split(",").forEach(item=>{

item=item.trim();

for(const alimento in caloriasDB){
if(item.includes(alimento)){
total += caloriasDB[alimento];
}
}

});

});

});

const el=document.getElementById("caloriasSemana");
if(el) el.innerText = total+" kcal";

analisarDieta(total);
}

/* ===== IA ANALISA DIETA ===== */

function analisarDieta(calorias){

const status=document.getElementById("statusDieta");
if(!status) return;

if(calorias < 4000){
status.innerText="âš ï¸ Pouca ingestÃ£o energÃ©tica";
}
else if(calorias < 9000){
status.innerText="âœ… Equilibrado";
}
else{
status.innerText="ğŸ”¥ Alta ingestÃ£o calÃ³rica";
}

}

/* ===== SUGESTÃ•ES IA ===== */

function sugerirRefeicoes(){

const ideias = [
"Frango, arroz, salada",
"Ovo, pÃ£o integral, banana",
"Iogurte, aveia, fruta",
"Carne, legumes, arroz",
"MacarrÃ£o, frango desfiado"
];

dias.forEach((dia,i)=>{

if(!cardapio[i]) cardapio[i]={};

cardapio[i].almoco =
ideias[Math.floor(Math.random()*ideias.length)];

});

renderCardapio();
calcularCalorias();

alert("CardÃ¡pio inteligente criado âœ¨");
}

/* recalcula sempre */
setInterval(calcularCalorias,15000);

/* ===========================
   NUTRICIONISTA IA COMPLETO
=========================== */

let caloriasHoje = Number(localStorage.getItem("caloriasHoje")) || 0;
let aguaHoje = Number(localStorage.getItem("aguaHoje")) || 0;

/* ==========================
   BASE DE REFEIÃ‡Ã•ES IA
   (EMAGRECIMENTO)
========================== */

const refeicoesIA = [

{nome:"Omelete + fruta", calorias:300, tipo:"leve"},
{nome:"Frango grelhado + salada", calorias:400, tipo:"saciedade"},
{nome:"Arroz, feijÃ£o e frango", calorias:520, tipo:"completa"},
{nome:"Iogurte natural + banana", calorias:220, tipo:"lanche"},
{nome:"Tapioca com ovo", calorias:350, tipo:"equilibrada"},
{nome:"Salada + atum", calorias:280, tipo:"leve"},
{nome:"Wrap de frango", calorias:430, tipo:"completa"},
{nome:"Panqueca de banana", calorias:260, tipo:"lanche"},
{nome:"Sopa de legumes", calorias:240, tipo:"leve"},
{nome:"Frango + legumes refogados", calorias:380, tipo:"saciedade"}

];

/* ==========================
   SUGESTÃƒO INTELIGENTE
========================== */

function sugerirRefeicaoEmagrecimento(){

const meta = Number(document.getElementById("metaCalorias").value);
const restante = meta - caloriasHoje;

if(restante <= 0){
document.getElementById("analiseIA").innerText =
"âœ… Meta atingida! Prefira chÃ¡ ou algo leve.";
return;
}

/* FILTRA refeiÃ§Ãµes ideais */
let sugestoes = refeicoesIA.filter(r => r.calorias <= restante);

/* estratÃ©gia emagrecimento */
if(restante < 250){
sugestoes = sugestoes.filter(r=>r.tipo==="leve" || r.tipo==="lanche");
}
else if(restante < 450){
sugestoes = sugestoes.filter(r=>r.tipo!=="completa");
}

if(sugestoes.length === 0){
document.getElementById("analiseIA").innerText =
"ğŸ¥— Hoje prefira algo bem leve para manter o dÃ©ficit.";
return;
}

/* escolhe aleatÃ³ria inteligente */
const escolha =
sugestoes[Math.floor(Math.random()*sugestoes.length)];

document.getElementById("analiseIA").innerText =
`ğŸ½ SugestÃ£o IA: ${escolha.nome}
(${escolha.calorias} kcal)
ğŸ”¥ Ideal para continuar emagrecendo`;
}
  
/* ===== BASE DE CALORIAS ===== */

const alimentosIA = {
"arroz":130,
"feijao":90,
"frango":165,
"ovo":70,
"banana":90,
"maÃ§a":80,
"pÃ£o":140,
"salada":40,
"carne":250,
"macarrao":220,
"iogurte":120,
"aveia":110,
"leite":100,
"queijo":120
};

/* ===== CONTAR CALORIAS AUTOMÃTICO ===== */

function atualizarCaloriasHoje(){

let total = 0;

cardapio.forEach(dia=>{
if(!dia) return;

Object.values(dia).forEach(refeicao=>{
if(!refeicao) return;

refeicao.toLowerCase().split(",").forEach(item=>{

item=item.trim();

for(const alimento in alimentosIA){
if(item.includes(alimento)){
total += alimentosIA[alimento];
}
}

});

});

});

caloriasHoje = total;

localStorage.setItem("caloriasHoje", caloriasHoje);

document.getElementById("caloriasHoje").innerText =
caloriasHoje + " kcal";

analisarMetaCalorica();
}

/* ===== ANALISAR META ===== */

function analisarMetaCalorica(){

const meta = Number(document.getElementById("metaCalorias").value);
const status = document.getElementById("statusCalorias");

if(!meta) return;

if(caloriasHoje < meta*0.7){
status.innerText="âš ï¸ Abaixo da meta";
}
else if(caloriasHoje <= meta){
status.innerText="âœ… Dentro da meta";
}
else{
status.innerText="ğŸ”¥ Acima da meta";
}

}

/* ===== ÃGUA ===== */

function beberAgua(ml){

aguaHoje += ml;

localStorage.setItem("aguaHoje", aguaHoje);

document.getElementById("aguaHoje").innerText =
aguaHoje + " ml";

analisarAgua();
}

function analisarAgua(){

const meta = Number(document.getElementById("metaAgua").value);
const status = document.getElementById("statusAgua");

if(!meta) return;

if(aguaHoje < meta*0.5){
status.innerText="ğŸ’§ Beba mais Ã¡gua";
}
else if(aguaHoje < meta){
status.innerText="ğŸ‘ Quase lÃ¡!";
}
else{
status.innerText="âœ… Meta de Ã¡gua atingida!";
}

}

/* ===== IA SUGERE PRATOS ===== */

function sugestaoCaloricaIA(){

const meta = Number(document.getElementById("metaCalorias").value);
if(!meta) return;

const falta = meta - caloriasHoje;

const sugestoes = [
{nome:"Frango + arroz + salada", kcal:350},
{nome:"Omelete + pÃ£o integral", kcal:280},
{nome:"Iogurte + aveia + banana", kcal:300},
{nome:"Carne + legumes", kcal:400},
{nome:"Vitamina de banana + leite", kcal:250}
];

let ideias = sugestoes
.filter(s => s.kcal <= falta + 200)
.slice(0,3);

const area = document.getElementById("sugestaoIA");

area.innerHTML = "<b>SugestÃµes IA:</b><br>";

ideias.forEach(i=>{
area.innerHTML += `ğŸ½ ${i.nome} (~${i.kcal} kcal)<br>`;
});

}

/* ===== ATUALIZA AUTOMÃTICO ===== */

setInterval(atualizarCaloriasHoje,15000);

/* iniciar valores */
document.addEventListener("DOMContentLoaded",()=>{
document.getElementById("aguaHoje").innerText = aguaHoje+" ml";
atualizarCaloriasHoje();
});

/* ===========================
   NUTRIÃ‡ÃƒO ADAPTATIVA IA
=========================== */

function analisarPadraoAlimentar(){

let refeicoes = 0;

cardapio.forEach(d=>{
if(!d) return;

Object.values(d).forEach(r=>{
if(r && r.length > 3) refeicoes++;
});
});

let msg="";

if(refeicoes < 5){
msg="âš ï¸ Poucas refeiÃ§Ãµes registradas. Seu corpo pode sentir queda de energia.";
}
else if(refeicoes <=10){
msg="âœ… Rotina alimentar equilibrada.";
}
else{
msg="ğŸ”¥ AlimentaÃ§Ã£o bem ativa! Foque em hidrataÃ§Ã£o.";
}

document.getElementById("analiseIA").innerText = msg;
}

/* ===== GERADOR DE CARDÃPIO IA ===== */

function gerarPlanoAutomatico(){

const hora = new Date().getHours();

let sugestao = {};

if(hora < 12){
sugestao = {
cafe:"banana, aveia, leite",
almoco:"arroz, frango, salada",
jantar:"omelete, legumes"
};
}
else if(hora < 18){
sugestao = {
cafe:"iogurte, fruta",
almoco:"carne, arroz, feijao",
jantar:"sopa de legumes"
};
}
else{
sugestao = {
cafe:"vitamina de banana",
almoco:"frango grelhado, salada",
jantar:"ovo, legumes leves"
};
}

/* aplica no dia atual */
const hoje = new Date().getDay()-1;
const index = hoje < 0 ? 6 : hoje;

cardapio[index] = sugestao;

salvar("cardapio", cardapio);
renderCardapio();
atualizarCaloriasHoje();

document.getElementById("planoIA").innerHTML =
"âœ… CardÃ¡pio inteligente criado automaticamente!";
}

/* ===== DETECTOR DE BAIXA ENERGIA ===== */

function alertaEnergia(){

const meta = Number(document.getElementById("metaCalorias").value);

if(!meta) return;

if(caloriasHoje < meta*0.5){

document.getElementById("analiseIA").innerText =
"ğŸ”‹ Energia baixa detectada. SugestÃ£o: lanche rÃ¡pido rico em proteÃ­na.";
}
}

/* ===== IA APRENDE COM USO ===== */

function aprendizadoIA(){

let historico = JSON.parse(localStorage.getItem("historicoIA")) || [];

historico.push({
data:new Date().toLocaleDateString(),
calorias:caloriasHoje,
agua:aguaHoje
});

if(historico.length > 7) historico.shift();

localStorage.setItem("historicoIA", JSON.stringify(historico));
}

/* ===== LOOP INTELIGENTE ===== */

setInterval(()=>{
analisarPadraoAlimentar();
alertaEnergia();
aprendizadoIA();
},60000);

/* ===========================
   CORPO INTELIGENTE IA
=========================== */

let metabolismoBase = 0;
let gastoDiario = 0;

function calcularCorpoIA(){

const peso = Number(document.getElementById("pesoUsuario").value);
const altura = Number(document.getElementById("alturaUsuario").value);
const atividade = Number(document.getElementById("atividadeUsuario").value);

if(!peso || !altura){
alert("Preencha peso e altura");
return;
}

/* FÃ³rmula Mifflin-St Jeor (adaptada) */
metabolismoBase = (10*peso)+(6.25*altura)-(5*30)-161;

gastoDiario = metabolismoBase * atividade;

/* ajusta meta automÃ¡tica */
document.getElementById("metaCalorias").value =
Math.round(gastoDiario);

document.getElementById("resultadoCorpoIA").innerHTML = `
ğŸ”¥ Metabolismo base: <b>${Math.round(metabolismoBase)} kcal</b><br>
âš¡ Gasto diÃ¡rio estimado: <b>${Math.round(gastoDiario)} kcal</b><br>
âœ… Meta calÃ³rica ajustada automaticamente
`;

localStorage.setItem("corpoIA",
JSON.stringify({peso,altura,atividade,gastoDiario}));
}

/* ===== DETECTOR DE CANSAÃ‡O ===== */

function detectarCansacoIA(){

if(!gastoDiario) return;

const meta = Number(document.getElementById("metaCalorias").value);

if(caloriasHoje < meta*0.4){

document.getElementById("analiseIA").innerText =
"ğŸ˜´ Baixa ingestÃ£o detectada. Seu corpo pode ficar cansado hoje.";
}
}

/* ===== HIDRATAÃ‡ÃƒO INTELIGENTE ===== */

function hidratarIA(){

const metaAgua = Number(localStorage.getItem("metaAgua")) || 2000;

if(aguaHoje < metaAgua*0.5){

document.getElementById("analiseIA").innerText =
"ğŸ’§ Hidrate-se! Baixo consumo de Ã¡gua detectado.";
}
}

/* ===== PREVISÃƒO DE ENERGIA DO DIA ===== */

function previsaoEnergia(){

const hora = new Date().getHours();

let msg="";

if(hora < 12)
msg="ğŸŒ… Energia ideal para tarefas importantes.";

else if(hora < 18)
msg="â˜€ï¸ Mantenha refeiÃ§Ãµes leves para evitar queda de energia.";

else
msg="ğŸŒ™ Priorize refeiÃ§Ãµes leves e descanso.";

document.getElementById("resultadoCorpoIA").innerHTML +=
`<br><br>${msg}`;
}

/* LOOP DO CORPO IA */
setInterval(()=>{
detectarCansacoIA();
hidratarIA();
previsaoEnergia();
},60000);

setInterval(()=>{
sugerirRefeicaoEmagrecimento();
},120000);

function salvarMetaAgua(){
const meta = document.getElementById("metaAgua").value;
localStorage.setItem("metaAgua", meta);
}  

/* ===== NUTRICIONISTA IA â€” SUGESTÃ•ES INTELIGENTES ===== */

function sugerirRefeicoesIA(){

const area = document.getElementById("planoIA");
  
if(!area) return;

/* sugestÃµes focadas em emagrecimento */
const cafes = [
"ğŸ³ Omelete + cafÃ© sem aÃ§Ãºcar",
"ğŸ¥£ Iogurte natural + chia + fruta",
"ğŸŒ Vitamina de banana com aveia",
"ğŸ¥‘ PÃ£o integral + ovo mexido"
];

const almocos = [
"ğŸ¥— Frango grelhado + salada + arroz integral",
"ğŸŸ Peixe assado + legumes",
"ğŸ¥© Carne magra + purÃª de abÃ³bora",
"ğŸ— Frango desfiado + legumes salteados"
];

const lanches = [
"ğŸ MaÃ§Ã£ + castanhas",
"ğŸ¥œ Amendoim ou mix de nuts",
"ğŸ§€ Queijo branco + fruta",
"ğŸ¥£ Iogurte proteico"
];

const jantares = [
"ğŸ¥— Salada completa com proteÃ­na",
"ğŸ³ Omelete de legumes",
"ğŸ¥£ Sopa leve de legumes",
"ğŸ” Frango grelhado + legumes"
];

/* escolher aleatÃ³rio */
const r = (lista)=> lista[Math.floor(Math.random()*lista.length)];

area.innerHTML = `
<div class="card">

<h3>âœ¨ SugestÃµes IA para Emagrecimento</h3>

<b>â˜€ï¸ CafÃ© da manhÃ£</b><br>
${r(cafes)}<br><br>

<b>ğŸ› AlmoÃ§o</b><br>
${r(almocos)}<br><br>

<b>ğŸ Lanche</b><br>
${r(lanches)}<br><br>

<b>ğŸŒ™ Jantar</b><br>
${r(jantares)}

</div>
`;
}

function aplicarSugestaoCardapio(){

if(!window.sugestaoAtual) return;

cardapio[0] = {
cafe: sugestaoAtual.cafe,
almoco: sugestaoAtual.almoco,
jantar: sugestaoAtual.jantar
};

renderCardapio();
salvar("cardapio",cardapio);

alert("CardÃ¡pio aplicado âœ…");
}
  
</script>

</body>
</html>
